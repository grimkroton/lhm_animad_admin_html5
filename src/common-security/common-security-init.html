<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"><link rel="import" href="../../bower_components/polymer/lib/elements/dom-repeat.html"><link rel="import" href="../../bower_components/iron-meta/iron-meta.html"><link rel="import" href="../animad-icons.html"></head><body><dom-module id="common-security-init"><template><style></style><iron-ajax auto="" url="[[permissionsUrl]]" id="perms" handle-as="json" last-response="{{_permissions}}" on-response="_setPermissions"></iron-ajax></template><script>var CommonSecurityInit=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'common-security-init'}},{key:'properties',get:function(){return{permissionsUrl:{type:String,value:'http://localhost:8870/getPermissionsDummy'},_permissions:{type:Object,value:[],notify:!0}}}}]),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this)}},{key:'checkPermissions',value:function(a){return 0<this._permissions.filter(function(b){return b===a}).length?(console.log('checkPermissions: Permission '+a+' found in list'),!0):(console.log('checkPermissions: Permission '+a+' NOT found in list. Found: '+this._permissions),!1)}},{key:'getPermissions',value:function(){return this._permissions}},{key:'_setPermissions',value:function(){console.log('setPermissions called'),window.dispatchEvent(new CustomEvent('permissionsReceived',{detail:{kicked:!0}}))}},{key:'_fetchPermissionsSynchronously',value:function(){var a=permissionsUrl,b=new XMLHttpRequest;b.open('GET',a,!1),b.send(null),200===b.status&&(console.log(b.responseText),this._permissions=JSON.parse(b.responseText))}},{key:'_changed',value:function(){console.log('changed!')}}]),b}(Polymer.Element);customElements.define(CommonSecurityInit.is,CommonSecurityInit);</script></dom-module></body></html>